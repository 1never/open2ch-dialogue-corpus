# おーぷん2ちゃんねる対話コーパス
## 概要
[おーぷん2ちゃんねる](https://open2ch.net/)の「なんでも実況(ジュピター)」「ニュー速VIP」「ニュース速報+」の3つの掲示板をクロールして作成した対話コーパスです．
おーぷん2ちゃんねる開設時から2019年7月20日までのデータを使用して作成しました．

## 配布先
[こちら](http://keldic.net/data/open2ch_dialogue_corpus.zip)からダウンロードしてください．
内容を見てみたい方のためのサンプルデータは[こちら](http://keldic.net/data/corpus_sample.tsv)．

## データ形式
* データはtsv形式であり，レスアンカー「>>」で指定された投稿同士をタブ区切りで連結しています．各行が1対話となります．

    例： [投稿1] [tab] [投稿2] [tab] [投稿3] ...

* 上の例では，投稿2は投稿1へのレスアンカーを(原文では)含み，投稿3は投稿2へのレスアンカーを(原文では)含んでいます．コーパス中ではレスアンカーは削除されています．
    * レスアンカーは文頭にあるもののみを使用し，文頭以外でレスアンカーを含む投稿は除外しています．
* 対話は2者が交互に投稿したもののみを収録しています．つまり，偶数番目の投稿と奇数番目の投稿はそれぞれ同じユーザが投稿したものです．
* 改行は「\_\_BR\_\_」という記号に置換されています．
* 以下の条件に該当する投稿は除外しています．
    * 文字数が5文字未満，および150文字より大きい投稿
    * URLおよび画像を含む投稿
    * 2つ以上のレスアンカーを含む投稿
    * ひらがな，カタカナ，漢字のいずれも含まない投稿
    * 4回以上の改行を含む投稿(対話としてふさわしくないもの，例えば打順や日程の列挙などを含むため)

### ファイル構成
| ファイル名 | 取得先 | 対話数 | 平均対話長 |
|-----------|-----------------------|-----------|-----------------------|
| livejupiter.tsv |なんでも実況(ジュピター) | 5948218 | 2.24 |
| news4vip.tsv | ニュー速VIP | 1983626 | 2.41 |
| newsplus.tsv | ニュース速報+ | 217296 | 2.09 |
|  | 合計| 8149140 | 2.28 |

## 後処理用スクリプト
様々な用途に使用しやすいよう，不適切な表現を含む投稿を除去するスクリプト(cleaning.py)と改行記号「\_\_BR\_\_」を句読点に置換するスクリプトを用意しました．
ただし，本スクリプトを適用しても，不適切な表現が完全に除去できるわけではありません．
また，読点とすべきところを句点とするなど，改行記号が不適切に置換される場合があります．

スクリプトはファイル単位で実行します．
livejupiter.tsvを対象にスクリプトを実行するコマンドは以下のとおりです．

### 不適切な用語の除去
```
$ python cleaning.py --input_file livejupiter.tsv --output_file livejupiter_cleaned.tsv
```
### 改行記号の置換
実行にはmecab-python3が必要です．
```
$ python replace_br.py --input_file livejupiter.tsv --output_file livejupiter_replaced.tsv
```
